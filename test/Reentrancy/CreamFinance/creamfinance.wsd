@startuml

interface IERC1820Registry {
    ' -- inheritance --

    ' -- usingFor --

    ' -- vars --

    ' -- methods --
	+setInterfaceImplementer()

}


interface IcrToken {
    ' -- inheritance --

    ' -- usingFor --

    ' -- vars --

    ' -- methods --
	+ðŸ’°mint()
	+borrow()
	+ðŸ”balanceOf()
	+ðŸ”decimals()
	+accrueInterest()
	+approve()
	+ðŸ’°redeemUnderlying()
	+liquidateBorrow()
	+redeem()

}


interface IUnitroller {
    ' -- inheritance --

    ' -- usingFor --

    ' -- vars --

    ' -- methods --
	+ðŸ’°enterMarkets()
	+exitMarket()
	+ðŸ”borrowCaps()

}


class Exploit_CreamFinance {
    ' -- inheritance --
	{abstract}TestHarness
	{abstract}TokenBalanceTracker

    ' -- usingFor --

    ' -- vars --
	#[[IERC1820Registry]] interfaceRegistry
	#[[IUniswapV2Pair]] wiseWethPair
	#[[IUnitroller]] comptroller
	#[[IWETH9]] weth
	#[[IcrToken]] crAmp
	#[[IcrToken]] crEth
	#[[IERC20]] amp
	#{static}[[bytes32]] TOKENS_RECIPIENT_INTERFACE_HASH

    ' -- methods --
	+setUp()
	+test_attack()
	+uniswapV2Call()
	+tokensReceived()
	+ðŸ’°**__constructor__**()

}


class ExploiterMinion {
    ' -- inheritance --

    ' -- usingFor --

    ' -- vars --
	#[[IERC1820Registry]] interfaceRegistry
	#{static}[[bytes32]] TOKENS_RECIPIENT_INTERFACE_HASH
	#[[address]] commanderContract
	#[[IWETH9]] weth
	#[[IcrToken]] crAmp
	#[[IcrToken]] crEth
	#[[IERC20]] amp

    ' -- methods --
	+**__constructor__**()
	+liquidateAMPBorrow()
	+redeemLiquidationPrize()
	+depositAndTransferWeth()
	+selfDestructMinion()
	+tokensReceived()
	+ðŸ’°**__constructor__**()

}
' -- inheritance / usingFor --
Exploit_CreamFinance --[#DarkGoldenRod]|> TestHarness
Exploit_CreamFinance --[#DarkGoldenRod]|> TokenBalanceTracker

@enduml